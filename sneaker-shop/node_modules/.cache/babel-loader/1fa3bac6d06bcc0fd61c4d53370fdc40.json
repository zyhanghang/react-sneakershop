{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper'; // 在函数式组件中使用state等React特性需要 Hook\n\nconst Cart = () => {\n  const [carts, setCarts] = useState([]); // 类似 componentDidMount\n  // 如果不传递第二个参数，会重复执行\n\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  }, []);\n\n  const totalPrice = () => {\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  };\n\n  const updateCart = cart => {\n    const newCarts = [...carts];\n\n    const _index = newCarts.findIndex(c => c.id === cart.id);\n\n    newCarts.splice(_index, 1, cart);\n    setCarts(newCarts);\n  };\n\n  const deleteCart = cart => {\n    //将传过来的 cart从 carts数组中移除\n    const _carts = carts.filter(c => c.id !== cart.id);\n\n    setCarts(_carts);\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cart-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 9\n    }\n  }, carts.map(cart => /*#__PURE__*/React.createElement(CartItem, {\n    key: cart.id,\n    cart: cart,\n    updateCart: updateCart,\n    deleteCart: deleteCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, \"Toatl:\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 11\n    }\n  }, totalPrice()))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js"],"names":["React","useState","useEffect","axios","Layout","CartItem","formatPrice","Cart","carts","setCarts","get","then","res","data","totalPrice","itemPrices","map","cart","amount","parseInt","price","reducer","accumulator","currentValue","reduce","updateCart","newCarts","_index","findIndex","c","id","splice","deleteCart","_carts","filter"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,WAAT,QAA4B,gBAA5B,C,CAEA;;AACA,MAAMC,IAAI,GAAG,MAAM;AACjB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC,CADiB,CAGjB;AACA;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,KAAK,CAACO,GAAN,CAAU,QAAV,EAAoBC,IAApB,CAAyBC,GAAG,IAAIH,QAAQ,CAACG,GAAG,CAACC,IAAL,CAAxC;AACD,GAFQ,EAEN,EAFM,CAAT;;AAIA,QAAMC,UAAU,GAAG,MAAM;AACvB,UAAMC,UAAU,GAAGP,KAAK,CAACQ,GAAN,CAAUC,IAAI,IAAIA,IAAI,CAACC,MAAL,GAAcC,QAAQ,CAACF,IAAI,CAACG,KAAN,CAAxC,CAAnB;;AACA,UAAMC,OAAO,GAAG,CAACC,WAAD,EAAcC,YAAd,KAA+BD,WAAW,GAAGC,YAA7D;;AACA,UAAMT,UAAU,GAAGC,UAAU,CAACS,MAAX,CAAkBH,OAAlB,EAA2B,CAA3B,CAAnB;AACA,WAAOf,WAAW,CAACQ,UAAD,CAAlB;AACD,GALD;;AAOA,QAAMW,UAAU,GAAGR,IAAI,IAAI;AACzB,UAAMS,QAAQ,GAAG,CAAC,GAAGlB,KAAJ,CAAjB;;AACA,UAAMmB,MAAM,GAAGD,QAAQ,CAACE,SAAT,CAAmBC,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASb,IAAI,CAACa,EAAtC,CAAf;;AACAJ,IAAAA,QAAQ,CAACK,MAAT,CAAgBJ,MAAhB,EAAwB,CAAxB,EAA2BV,IAA3B;AACAR,IAAAA,QAAQ,CAACiB,QAAD,CAAR;AACD,GALD;;AAOA,QAAMM,UAAU,GAAGf,IAAI,IAAI;AACzB;AACA,UAAMgB,MAAM,GAAGzB,KAAK,CAAC0B,MAAN,CAAaL,CAAC,IAAIA,CAAC,CAACC,EAAF,KAASb,IAAI,CAACa,EAAhC,CAAf;;AACArB,IAAAA,QAAQ,CAACwB,MAAD,CAAR;AACD,GAJD;;AAMA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIzB,KAAK,CAACQ,GAAN,CAAUC,IAAI,iBACZ,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,IAAI,CAACa,EAApB;AACU,IAAA,IAAI,EAAEb,IADhB;AAEU,IAAA,UAAU,EAAEQ,UAFtB;AAGU,IAAA,UAAU,EAAEO,UAHtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFJ,CAFF,eAWE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEE;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BlB,UAAU,EAAzC,CAFF,CAXF,CADF,CADF;AAoBD,CAjDD;;AAmDA,eAAeP,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper';\n\n// 在函数式组件中使用state等React特性需要 Hook\nconst Cart = () => {\n  const [carts, setCarts] = useState([]);\n  \n  // 类似 componentDidMount\n  // 如果不传递第二个参数，会重复执行\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  }, []);\n\n  const totalPrice = () => {\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  }\n\n  const updateCart = cart => {\n    const newCarts = [...carts];\n    const _index = newCarts.findIndex(c => c.id === cart.id);\n    newCarts.splice(_index, 1, cart);\n    setCarts(newCarts);\n  }\n\n  const deleteCart = cart => {\n    //将传过来的 cart从 carts数组中移除\n    const _carts = carts.filter(c => c.id !== cart.id);\n    setCarts(_carts);\n  }\n  \n  return (\n    <Layout>\n      <div className=\"cart-page\">\n        <span className=\"cart-title\">Shopping Cart</span>\n        <div className=\"cart-list\">\n          {\n            carts.map(cart => \n              <CartItem key={cart.id} \n                        cart={cart} \n                        updateCart={updateCart} \n                        deleteCart={deleteCart} />)\n          }\n        </div>\n        <div className=\"cart-total\">\n          Toatl: \n          <span className=\"total-price\">{totalPrice()}</span>\n        </div>\n      </div>\n    </Layout>\n  ); \n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}