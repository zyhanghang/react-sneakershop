{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Login.js\";\n// import React from 'react';\n// import axios from 'commons/axios';\n// import useForm from 'react-hook-form';\n// import { toast } from 'react-toastify';\n// // react hook validation 需要在函数式组件中使用\n// export default function Login(props) {\n//   const { register, handleSubmit } = useForm(); \n//   const onSubmit = data => {\n//     // 1. 阻止默认事件行为，组件帮助处理\n//     // event.preventDefault();\n//     // 2. 获取表单数据\n//     // const formData = {\n//       // email: this.emailRef.current.value,\n//       // password: this.passwordRef.current.value\n//     // }\n//     console.log(data);\n//     // 3. 处理登录逻辑\n//     // 4. 跳转到首页视图\n//     // this.props.history.push('/');\n//   }\n//   return (\n//     <div className=\"login-wrapper\"> \n//         <form action=\"\" className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n//           {/* <div className=\"field\">\n//             <label className=\"label\">Name</label>\n//             <div className=\"control\">\n//               <input class=\"input\" type=\"text\" placeholder=\"Name\" />\n//             </div>\n//           </div>   */}\n//           <div className=\"field\">\n//             <label className=\"label\">Email</label>\n//             < div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Email\" \n//                 name=\"email\"\n//                 ref={register}\n//                 // value={this.state.email}\n//                 // onChange={this.handleChange}\n//                 // ref={this.emailRef} \n//               />\n//             </div>\n//          </div>\n//           <div className=\"field\">\n//             <label className=\"label\">Password</label>\n//             <div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Password\" \n//                 name=\"password\"\n//                 ref={register}\n//                 // value={this.state.password}\n//                 // onChange={this.handleChange}\n//                 // ref={this.passwordRef} \n//               />\n//             </div>\n//           </div>\n//           <div className=\"control\">\n//             <button className=\"button is-fullwidth is-primary\">Login</button>\n//           </div>\n//         </form>\n//       </div>\n//   );\n// };\nimport React from 'react';\nimport axios from 'commons/axios';\nimport useForm from 'react-hook-form';\nimport { toast } from 'react-toastify';\nexport default function Login(props) {\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onSubmit = async data => {\n    // 3. 处理登录逻辑\n    try {\n      const {\n        email,\n        password\n      } = data;\n      const res = await axios.post('/auth/login', {\n        email,\n        password\n      });\n      const jwToken = res.data;\n      console.log(jwToken);\n      global.auth.setToken(jwToken);\n      toast.success('Login Success'); // 4. 跳转到首页视图\n\n      props.history.push('/');\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"box login-box\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: `input ${errors.email && 'is-danger'}`,\n    type: \"text\",\n    placeholder: \"Email\",\n    name: \"email\",\n    ref: register({\n      required: 'email is required',\n      pattern: {\n        value: /^[A-Za-z0-9]+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\n        message: 'invalid email'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }\n  }), errors.email && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, errors.email.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  }, \"Password\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: `input ${errors.password && 'is-danger'}`,\n    type: \"password\",\n    placeholder: \"Password\",\n    name: \"password\",\n    ref: register({\n      required: 'password is required',\n      minLength: {\n        value: 6,\n        message: 'cannot be less than 6 digits'\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }), errors.password && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"helper has-text-danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, errors.password.message))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"control\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"button is-fullwidth is-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }, \"Login\"))));\n} // class Login extends React.Component {\n//   // 受控组件和非受控组件\n//   // State\n//   // 可以在constructor中用this.state = {}定义，也可以在外部用state = {}定义\n//   // constructor() {\n//   //   super();\n//     // this.state = {\n//     //   isLike: false,\n//     // }\n//   // }\n//   state = {\n//     email: '',\n//     password: ''\n//   };\n//   // Refs\n//   // 可以访问dom组件和自定义组件\n//   // ref属性不能用在函数式声明的组件上(Header)，因为函数声明的组件没有实例\n//   // emailRef = React.createRef();\n//   // passwordRef = React.createRef();\n//   handleSubmit = event => {\n//     // 1. 阻止默认事件行为\n//     event.preventDefault();\n//     // 2. 获取表单数据\n//     // const formData = {\n//       // email: this.emailRef.current.value,\n//       // password: this.passwordRef.current.value\n//     // }\n//     console.log(this.state);\n//     // 3. 处理登录逻辑\n//     // 4. 跳转到首页视图\n//     // this.props.history.push('/');\n//   }\n//   handleChange = e => {\n//     this.setState({\n//       [e.target.name]: e.target.value,\n//     });\n//   }\n//   render() {\n//     return (\n//       <div className=\"login-wrapper\"> \n//         <form action=\"\" className=\"box login-box\" onSubmit={this.handleSubmit}>\n//           <div className=\"field\">\n//             <label className=\"label\">Name</label>\n//             <div className=\"control\">\n//               <input class=\"input\" type=\"text\" placeholder=\"Name\" />\n//             </div>\n//           </div>  \n//           <div className=\"field\">\n//             <label className=\"label\">Email</label>\n//             < div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Email\" \n//                 name=\"email\"\n//                 value={this.state.email}\n//                 onChange={this.handleChange}\n//                 // ref={this.emailRef} \n//               />\n//             </div>\n//          </div>\n//           <div className=\"field\">\n//             <label className=\"label\">Password</label>\n//             <div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Password\" \n//                 name=\"password\"\n//                 value={this.state.password}\n//                 onChange={this.handleChange}\n//                 // ref={this.passwordRef} \n//               />\n//             </div>\n//           </div>\n//           <div className=\"control\">\n//             <button className=\"button is-fullwidth is-primary\">Login</button>\n//           </div>\n//         </form>\n//       </div>\n//     );\n//   }\n// }\n//  export default Login","map":{"version":3,"sources":["/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Login.js"],"names":["React","axios","useForm","toast","Login","props","register","handleSubmit","errors","onSubmit","data","email","password","res","post","jwToken","console","log","global","auth","setToken","success","history","push","error","message","response","required","pattern","value","minLength"],"mappings":"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AACZqB,MAAAA,QAAQ,EAAE,sBADE;AAEZG,MAAAA,SAAS,EAAE;AACTD,QAAAA,KAAK,EAAE,CADE;AAETJ,QAAAA,OAAO,EAAE;AAFA;AAFC,KAAD,CALf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAcGjB,MAAM,CAACI,QAAP,iBACC;AAAG,IAAA,SAAS,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGJ,MAAM,CAACI,QAAP,CAAgBa,OADnB,CAfJ,CAFF,CAtBF,eA6CE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAQ,IAAA,SAAS,EAAC,gCAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CA7CF,CADF,CADF;AAqDD,C,CAED;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA","sourcesContent":["// import React from 'react';\n// import axios from 'commons/axios';\n// import useForm from 'react-hook-form';\n// import { toast } from 'react-toastify';\n\n// // react hook validation 需要在函数式组件中使用\n// export default function Login(props) {\n\n//   const { register, handleSubmit } = useForm(); \n//   const onSubmit = data => {\n//     // 1. 阻止默认事件行为，组件帮助处理\n//     // event.preventDefault();\n//     // 2. 获取表单数据\n//     // const formData = {\n//       // email: this.emailRef.current.value,\n//       // password: this.passwordRef.current.value\n//     // }\n//     console.log(data);\n//     // 3. 处理登录逻辑\n\n//     // 4. 跳转到首页视图\n//     // this.props.history.push('/');\n//   }\n\n//   return (\n//     <div className=\"login-wrapper\"> \n//         <form action=\"\" className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n//           {/* <div className=\"field\">\n//             <label className=\"label\">Name</label>\n//             <div className=\"control\">\n//               <input class=\"input\" type=\"text\" placeholder=\"Name\" />\n//             </div>\n//           </div>   */}\n//           <div className=\"field\">\n//             <label className=\"label\">Email</label>\n//             < div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Email\" \n//                 name=\"email\"\n//                 ref={register}\n//                 // value={this.state.email}\n//                 // onChange={this.handleChange}\n//                 // ref={this.emailRef} \n//               />\n//             </div>\n//          </div>\n//           <div className=\"field\">\n//             <label className=\"label\">Password</label>\n//             <div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Password\" \n//                 name=\"password\"\n//                 ref={register}\n//                 // value={this.state.password}\n//                 // onChange={this.handleChange}\n//                 // ref={this.passwordRef} \n//               />\n//             </div>\n//           </div>\n//           <div className=\"control\">\n//             <button className=\"button is-fullwidth is-primary\">Login</button>\n//           </div>\n//         </form>\n//       </div>\n//   );\n// };\n\nimport React from 'react';\nimport axios from 'commons/axios';\nimport useForm from 'react-hook-form';\nimport { toast } from 'react-toastify';\n\nexport default function Login(props) {\n  const { register, handleSubmit, errors } = useForm();\n\n  const onSubmit = async data => {\n    // 3. 处理登录逻辑\n    try {\n      const { email, password } = data;\n      const res = await axios.post('/auth/login', { email, password });\n      const jwToken = res.data;\n      console.log(jwToken);\n      global.auth.setToken(jwToken);\n      toast.success('Login Success');\n      // 4. 跳转到首页视图\n      props.history.push('/');\n    } catch (error) {\n      const message = error.response.data.message;\n      toast.error(message);\n    }\n  };\n\n  return (\n    <div className=\"login-wrapper\">\n      <form className=\"box login-box\" onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"field\">\n          <label className=\"label\">Email</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.email && 'is-danger'}`}\n              type=\"text\"\n              placeholder=\"Email\"\n              name=\"email\"\n              ref={register({\n                required: 'email is required',\n                pattern: {\n                  value: /^[A-Za-z0-9]+([_\\\\.][A-Za-z0-9]+)*@([A-Za-z0-9\\\\-]+\\.)+[A-Za-z]{2,6}$/,\n                  message: 'invalid email'\n                }\n              })}\n            />\n            {errors.email && (\n              <p className=\"helper has-text-danger\">{errors.email.message}</p>\n            )}\n          </div>\n        </div>\n        <div className=\"field\">\n          <label className=\"label\">Password</label>\n          <div className=\"control\">\n            <input\n              className={`input ${errors.password && 'is-danger'}`}\n              type=\"password\"\n              placeholder=\"Password\"\n              name=\"password\"\n              ref={register({\n                required: 'password is required',\n                minLength: {\n                  value: 6,\n                  message: 'cannot be less than 6 digits'\n                }\n              })}\n            />\n            {errors.password && (\n              <p className=\"helper has-text-danger\">\n                {errors.password.message}\n              </p>\n            )}\n          </div>\n        </div>\n        <div className=\"control\">\n          <button className=\"button is-fullwidth is-primary\">Login</button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\n// class Login extends React.Component {\n\n//   // 受控组件和非受控组件\n//   // State\n//   // 可以在constructor中用this.state = {}定义，也可以在外部用state = {}定义\n//   // constructor() {\n//   //   super();\n//     // this.state = {\n//     //   isLike: false,\n//     // }\n//   // }\n//   state = {\n//     email: '',\n//     password: ''\n//   };\n\n//   // Refs\n//   // 可以访问dom组件和自定义组件\n//   // ref属性不能用在函数式声明的组件上(Header)，因为函数声明的组件没有实例\n//   // emailRef = React.createRef();\n//   // passwordRef = React.createRef();\n\n//   handleSubmit = event => {\n//     // 1. 阻止默认事件行为\n//     event.preventDefault();\n//     // 2. 获取表单数据\n//     // const formData = {\n//       // email: this.emailRef.current.value,\n//       // password: this.passwordRef.current.value\n//     // }\n//     console.log(this.state);\n//     // 3. 处理登录逻辑\n\n//     // 4. 跳转到首页视图\n//     // this.props.history.push('/');\n//   }\n\n//   handleChange = e => {\n//     this.setState({\n//       [e.target.name]: e.target.value,\n//     });\n//   }\n\n//   render() {\n//     return (\n//       <div className=\"login-wrapper\"> \n//         <form action=\"\" className=\"box login-box\" onSubmit={this.handleSubmit}>\n//           <div className=\"field\">\n//             <label className=\"label\">Name</label>\n//             <div className=\"control\">\n//               <input class=\"input\" type=\"text\" placeholder=\"Name\" />\n//             </div>\n//           </div>  \n//           <div className=\"field\">\n//             <label className=\"label\">Email</label>\n//             < div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Email\" \n//                 name=\"email\"\n//                 value={this.state.email}\n//                 onChange={this.handleChange}\n//                 // ref={this.emailRef} \n//               />\n//             </div>\n//          </div>\n//           <div className=\"field\">\n//             <label className=\"label\">Password</label>\n//             <div className=\"control\">\n//               <input \n//                 class=\"input\" \n//                 type=\"text\" \n//                 placeholder=\"Password\" \n//                 name=\"password\"\n//                 value={this.state.password}\n//                 onChange={this.handleChange}\n//                 // ref={this.passwordRef} \n//               />\n//             </div>\n//           </div>\n//           <div className=\"control\">\n//             <button className=\"button is-fullwidth is-primary\">Login</button>\n//           </div>\n//         </form>\n//       </div>\n//     );\n//   }\n// }\n\n//  export default Login"]},"metadata":{},"sourceType":"module"}