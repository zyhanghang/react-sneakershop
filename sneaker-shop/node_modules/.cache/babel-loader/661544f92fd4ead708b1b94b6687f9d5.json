{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js\";\nimport React, { useState, useEffect } from 'react';\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper'; // 在函数式组件中使用state等React特性需要 Hook\n\nconst Cart = () => {\n  const [carts, setCarts] = useState([]); // 类似 componentDidMount\n\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  });\n\n  const totalPrice = () => {\n    console.log(carts);\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n    console.log(itemPrices);\n\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cart-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }\n  }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 9\n    }\n  }, carts.map(cart => /*#__PURE__*/React.createElement(CartItem, {\n    key: cart.id,\n    cart: cart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }\n  }, \"Toatl:\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, totalPrice()))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js"],"names":["React","useState","useEffect","axios","Layout","CartItem","formatPrice","Cart","carts","setCarts","get","then","res","data","totalPrice","console","log","itemPrices","map","cart","amount","parseInt","price","reducer","accumulator","currentValue","reduce","id"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAASC,WAAT,QAA4B,gBAA5B,C,CAEA;;AACA,MAAMC,IAAI,GAAG,MAAM;AACjB,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC,CADiB,CAGjB;;AACAC,EAAAA,SAAS,CAAC,MAAM;AACdC,IAAAA,KAAK,CAACO,GAAN,CAAU,QAAV,EAAoBC,IAApB,CAAyBC,GAAG,IAAIH,QAAQ,CAACG,GAAG,CAACC,IAAL,CAAxC;AACD,GAFQ,CAAT;;AAIA,QAAMC,UAAU,GAAG,MAAM;AACvBC,IAAAA,OAAO,CAACC,GAAR,CAAYR,KAAZ;AACA,UAAMS,UAAU,GAAGT,KAAK,CAACU,GAAN,CAAUC,IAAI,IAAIA,IAAI,CAACC,MAAL,GAAcC,QAAQ,CAACF,IAAI,CAACG,KAAN,CAAxC,CAAnB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAYC,UAAZ;;AACA,UAAMM,OAAO,GAAG,CAACC,WAAD,EAAcC,YAAd,KAA+BD,WAAW,GAAGC,YAA7D;;AACA,UAAMX,UAAU,GAAGG,UAAU,CAACS,MAAX,CAAkBH,OAAlB,EAA2B,CAA3B,CAAnB;AACA,WAAOjB,WAAW,CAACQ,UAAD,CAAlB;AACD,GAPD;;AASA,sBACE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIN,KAAK,CAACU,GAAN,CAAUC,IAAI,iBACZ,oBAAC,QAAD;AAAU,IAAA,GAAG,EAAEA,IAAI,CAACQ,EAApB;AAAwB,IAAA,IAAI,EAAER,IAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFJ,CAFF,eAQE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAEE;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BL,UAAU,EAAzC,CAFF,CARF,CADF,CADF;AAiBD,CAlCD;;AAoCA,eAAeP,IAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper';\n\n// 在函数式组件中使用state等React特性需要 Hook\nconst Cart = () => {\n  const [carts, setCarts] = useState([]);\n  \n  // 类似 componentDidMount\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  })\n\n  const totalPrice = () => {\n    console.log(carts);\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n    console.log(itemPrices);\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  }\n  \n  return (\n    <Layout>\n      <div className=\"cart-page\">\n        <span className=\"cart-title\">Shopping Cart</span>\n        <div className=\"cart-list\">\n          {\n            carts.map(cart => \n              <CartItem key={cart.id} cart={cart} />)\n          }\n        </div>\n        <div className=\"cart-total\">\n          Toatl: \n          <span className=\"total-price\">{totalPrice()}</span>\n        </div>\n      </div>\n    </Layout>\n  ); \n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}