{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyuanhang/Desktop/sneaker-shop/src/components/CartItem.js\";\nimport React, { useState, useMemo } from 'react';\nimport axios from 'commons/axios';\nimport { formatPrice } from 'commons/helper';\n\nconst CartItem = props => {\n  const [amount, setAmount] = useState(props.cart.amount);\n  const {\n    id,\n    name,\n    image,\n    price\n  } = props.cart || {}; // const sumPrice = formatPrice(amount * parseInt(price));\n  // 只有amount或price变化才会执行函数\n\n  const sumPrice = useMemo(() => {\n    return formatPrice(amount * parseInt(price));\n  }, [amount, price]);\n\n  const handleChange = e => {\n    const _amount = parseInt(e.target.value);\n\n    setAmount(_amount);\n    const newCart = { ...props.cart,\n      amount: _amount\n    };\n    axios.put(`/carts/${id}`, newCart).then(res => {\n      console.log(newCart);\n      props.updateCart(newCart);\n    });\n  };\n\n  const deleteCart = () => {\n    axios.delete(`/carts/${id}`).then(res => {\n      //在父组件中删除\n      props.deleteCart(props.cart);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"columns is-vcentered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column is-narrow\",\n    onClick: deleteCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"close\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, \"X\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column is-narrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: name,\n    width: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column cart-name is-narrow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }, formatPrice(price))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    className: \"imput num-input\",\n    value: amount,\n    min: 1,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"column\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"sum-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, sumPrice)));\n};\n\nexport default CartItem;","map":{"version":3,"sources":["/Users/zhangyuanhang/Desktop/sneaker-shop/src/components/CartItem.js"],"names":["React","useState","useMemo","axios","formatPrice","CartItem","props","amount","setAmount","cart","id","name","image","price","sumPrice","parseInt","handleChange","e","_amount","target","value","newCart","put","then","res","console","log","updateCart","deleteCart","delete"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,OAA1B,QAAyC,OAAzC;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SAASC,WAAT,QAA4B,gBAA5B;;AAGA,MAAMC,QAAQ,GAAGC,KAAK,IAAI;AACxB,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBP,QAAQ,CAACK,KAAK,CAACG,IAAN,CAAWF,MAAZ,CAApC;AACA,QAAM;AAAEG,IAAAA,EAAF;AAAMC,IAAAA,IAAN;AAAYC,IAAAA,KAAZ;AAAmBC,IAAAA;AAAnB,MAA6BP,KAAK,CAACG,IAAN,IAAc,EAAjD,CAFwB,CAIxB;AACA;;AACA,QAAMK,QAAQ,GAAGZ,OAAO,CAAC,MAAM;AAC7B,WAAOE,WAAW,CAACG,MAAM,GAAGQ,QAAQ,CAACF,KAAD,CAAlB,CAAlB;AACD,GAFuB,EAErB,CAACN,MAAD,EAASM,KAAT,CAFqB,CAAxB;;AAIA,QAAMG,YAAY,GAAGC,CAAC,IAAI;AACxB,UAAMC,OAAO,GAAGH,QAAQ,CAACE,CAAC,CAACE,MAAF,CAASC,KAAV,CAAxB;;AACAZ,IAAAA,SAAS,CAACU,OAAD,CAAT;AACA,UAAMG,OAAO,GAAG,EACd,GAAGf,KAAK,CAACG,IADK;AAEdF,MAAAA,MAAM,EAAEW;AAFM,KAAhB;AAIAf,IAAAA,KAAK,CAACmB,GAAN,CAAW,UAASZ,EAAG,EAAvB,EAA0BW,OAA1B,EAAmCE,IAAnC,CAAwCC,GAAG,IAAI;AAC7CC,MAAAA,OAAO,CAACC,GAAR,CAAYL,OAAZ;AACAf,MAAAA,KAAK,CAACqB,UAAN,CAAiBN,OAAjB;AACD,KAHD;AAID,GAXD;;AAaA,QAAMO,UAAU,GAAG,MAAM;AACvBzB,IAAAA,KAAK,CAAC0B,MAAN,CAAc,UAASnB,EAAG,EAA1B,EAA6Ba,IAA7B,CAAkCC,GAAG,IAAI;AACvC;AACAlB,MAAAA,KAAK,CAACsB,UAAN,CAAiBtB,KAAK,CAACG,IAAvB;AACD,KAHD;AAID,GALD;;AAOA,sBACE;AAAK,IAAA,SAAS,EAAC,sBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAkC,IAAA,OAAO,EAAEmB,UAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADF,CADF,eAIE;AAAK,IAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAK,IAAA,GAAG,EAAEhB,KAAV;AAAiB,IAAA,GAAG,EAAED,IAAtB;AAA4B,IAAA,KAAK,EAAC,KAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,eAOE;AAAK,IAAA,SAAS,EAAC,4BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,IADH,CAPF,eAUE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyBP,WAAW,CAACS,KAAD,CAApC,CADF,CAVF,eAaE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAqB,IAAA,SAAS,EAAC,iBAA/B;AAAiD,IAAA,KAAK,EAAEN,MAAxD;AAAgE,IAAA,GAAG,EAAE,CAArE;AAAwE,IAAA,QAAQ,EAAES,YAAlF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAbF,eAgBE;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,WAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6BF,QAA7B,CADF,CAhBF,CADF;AAsBD,CApDD;;AAsDA,eAAeT,QAAf","sourcesContent":["import React, { useState, useMemo } from 'react';\nimport axios from 'commons/axios';\nimport { formatPrice } from 'commons/helper';\n\n\nconst CartItem = props => {\n  const [amount, setAmount] = useState(props.cart.amount)\n  const { id, name, image, price } = props.cart || {};\n\n  // const sumPrice = formatPrice(amount * parseInt(price));\n  // 只有amount或price变化才会执行函数\n  const sumPrice = useMemo(() => {\n    return formatPrice(amount * parseInt(price));\n  }, [amount, price]);\n\n  const handleChange = e => {\n    const _amount = parseInt(e.target.value);\n    setAmount(_amount);\n    const newCart = {\n      ...props.cart,\n      amount: _amount\n    }\n    axios.put(`/carts/${id}`, newCart).then(res => {\n      console.log(newCart)\n      props.updateCart(newCart);\n    })\n  }\n\n  const deleteCart = () => {\n    axios.delete(`/carts/${id}`).then(res => {\n      //在父组件中删除\n      props.deleteCart(props.cart);\n    })\n  }\n\n  return (\n    <div className=\"columns is-vcentered\">\n      <div className=\"column is-narrow\" onClick={deleteCart}>\n        <span className=\"close\">X</span>\n      </div>\n      <div className=\"column is-narrow\">\n        <img src={image} alt={name} width=\"100\" />\n      </div>\n      <div className=\"column cart-name is-narrow\">\n        {name}\n      </div>\n      <div className=\"column\">\n        <span className=\"price\">{formatPrice(price)}</span>\n      </div>\n      <div className=\"column\">\n        <input type=\"number\" className=\"imput num-input\" value={amount} min={1} onChange={handleChange} />\n      </div>\n      <div className=\"column\">\n        <span className=\"sum-price\">{sumPrice}</span>\n      </div>\n    </div>\n  )\n} \n\nexport default CartItem;"]},"metadata":{},"sourceType":"module"}