{"ast":null,"code":"var _jsxFileName = \"/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js\";\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper'; // 在函数式组件中使用state等React特性需要 Hook\n\nconst Cart = () => {\n  const [carts, setCarts] = useState([]); // 类似 componentDidMount\n  // 如果不传递第二个参数，会重复执行\n\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  }, []); // 当carts变化的时候才执行\n\n  const totalPrice = useMemo(() => {\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  }, [carts]);\n\n  const updateCart = cart => {\n    const newCarts = [...carts];\n\n    const _index = newCarts.findIndex(c => c.id === cart.id);\n\n    newCarts.splice(_index, 1, cart);\n    setCarts(newCarts);\n  };\n\n  const deleteCart = cart => {\n    //将传过来的 cart从 carts数组中移除\n    const _carts = carts.filter(c => c.id !== cart.id);\n\n    setCarts(_carts);\n  };\n\n  return /*#__PURE__*/React.createElement(Layout, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cart-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  }, \"Shopping Cart\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TransitionGroup, {\n    component: null,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 11\n    }\n  }, carts.map(cart => /*#__PURE__*/React.createElement(CSSTransition, {\n    classNames: \"cart-item\",\n    timeout: 300,\n    key: cart.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(CartItem, {\n    key: cart.id,\n    cart: cart,\n    updateCart: updateCart,\n    deleteCart: deleteCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 19\n    }\n  }))))), carts.length === 0 ? /*#__PURE__*/React.createElement(\"p\", {\n    className: \"no-cart\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 32\n    }\n  }, \"No Sneakers In Cart\") : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cart-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, \"Toatl:\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"total-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 11\n    }\n  }, totalPrice))));\n};\n\nexport default Cart;","map":{"version":3,"sources":["/Users/zhangyuanhang/Desktop/sneaker-shop/src/pages/Cart.js"],"names":["React","useState","useEffect","useMemo","TransitionGroup","CSSTransition","axios","Layout","CartItem","formatPrice","Cart","carts","setCarts","get","then","res","data","totalPrice","itemPrices","map","cart","amount","parseInt","price","reducer","accumulator","currentValue","reduce","updateCart","newCarts","_index","findIndex","c","id","splice","deleteCart","_carts","filter","length"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\n\nimport axios from 'commons/axios';\nimport Layout from 'Layout';\nimport CartItem from 'components/CartItem';\nimport { formatPrice } from 'commons/helper';\n\n// 在函数式组件中使用state等React特性需要 Hook\nconst Cart = () => {\n  const [carts, setCarts] = useState([]);\n  \n  // 类似 componentDidMount\n  // 如果不传递第二个参数，会重复执行\n  useEffect(() => {\n    axios.get('/carts').then(res => setCarts(res.data));\n  }, []);\n\n  // 当carts变化的时候才执行\n  const totalPrice = useMemo(() => {\n    const itemPrices = carts.map(cart => cart.amount * parseInt(cart.price));\n    const reducer = (accumulator, currentValue) => accumulator + currentValue;\n    const totalPrice = itemPrices.reduce(reducer, 0);\n    return formatPrice(totalPrice);\n  }, [carts]);\n  \n  const updateCart = cart => {\n    const newCarts = [...carts];\n    const _index = newCarts.findIndex(c => c.id === cart.id);\n    newCarts.splice(_index, 1, cart);\n    setCarts(newCarts);\n  }\n\n  const deleteCart = cart => {\n    //将传过来的 cart从 carts数组中移除\n    const _carts = carts.filter(c => c.id !== cart.id);\n    setCarts(_carts);\n  }\n  \n  return (\n    <Layout>\n      <div className=\"cart-page\">\n        <span className=\"cart-title\">Shopping Cart</span>\n        <div className=\"cart-list\">\n          <TransitionGroup component={null}>\n            {\n              carts.map(cart => (\n                <CSSTransition classNames=\"cart-item\" timeout={300} key={cart.id}>\n                  <CartItem \n                    key={cart.id} \n                    cart={cart} \n                    updateCart={updateCart} \n                    deleteCart={deleteCart} \n                  />\n                </CSSTransition>\n             ))\n            }\n          </TransitionGroup>\n        </div>\n        { carts.length === 0 ? <p className=\"no-cart\">No Sneakers In Cart</p> : '' }\n        <div className=\"cart-total\">\n          Toatl: \n          <span className=\"total-price\">{totalPrice}</span>\n        </div>\n      </div>\n    </Layout>\n  ); \n};\n\nexport default Cart;"]},"metadata":{},"sourceType":"module"}